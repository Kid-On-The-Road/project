<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>秒杀</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/order.css}">
    <link rel="stylesheet" href="webjars/bootstrap/3.3.5/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="webjars/toastr/2.1.3/toastr.css"/>
    <link rel="stylesheet" href="webjars/bootstrap-datetimepicker/2.4.4/css/bootstrap-datetimepicker.min.css"/>
</head>
<!--onload="selectGoods()" :刷新页面时执行方法-->
<!--onbeforeunload="selectGoods()" :刷新页面前执行方法-->
<body>

<div class="order form-inline">
    <label for="orderGoodsName">商品名称：
        <select id="orderGoodsName" class="form-control" data-live-search="true">
            <option th:each="g: ${goodsDtos}" th:text="${g.goodsName}" th:value="${g.goodsId}"></option>
        </select>
    </label>
    <label for="userId">用户编码：
        <input class="form-control" id="userId" style="width: 50px" disabled="disabled"
               onkeyup="this.value=this.value.replace(/[, ]/g,'')"
               th:value="${userId}">
    </label>
</div>
<div class="order form-inline">
    <button id="orderGoodsButton" type="button" class="btn btn-warning glyphicon glyphicon-shopping-cart "
            th:style="${goodsDtos.size()==0}?'display:none;margin-left: 20px;position:static;':'margin-left: 20px;position:static;'"
            onclick="startOrder();">&nbsp;下单
    </button>
    <button type="button" class="btn btn-success glyphicon glyphicon-shopping-cart"
            style="margin-left: 20px;position:static;"
            onclick="shopping()">&nbsp;购物车
    </button>
</div>

<!--页面加载动画-->
<div class="goodsPage">
    <div class="cv-spinner">
        <span class="spinner"></span>
    </div>
</div>
<!--秒杀结果模态框-->
<div class="modal fade text-center" id="orderModal" tabindex="-1" role="dialog" aria-labelledby="orderModalLabel">
    <div class="modal-dialog" style="display: inline-block;width: 30%;" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title" id="orderModalLabel"></h4>
            </div>
            <div class="modal-body form-inline text-left">
                <form class="modalForm form-horizontal" role="form">
                    <p>秒杀已结束请前往购物车查看结果!</p>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                </button>
                <button id="save" type="submit" class="btn btn-primary" data-dismiss="modal"
                        onclick="selectOrderGoods('Y')">确认
                </button>
            </div>
        </div>
    </div>
</div>
<!--加载-->
<div class="modal fade" id="loading" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop='static'>
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">正在秒杀</h4>
            </div>
            <div class="modal-body">
                <p>请稍后...</p>
            </div>
        </div>
    </div>
</div>
<!--引入js-->
<script src="webjars/jquery/3.6.0/jquery.min.js"></script>
<script src="webjars/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src="webjars/bootstrap-datetimepicker/2.4.4/js/bootstrap-datetimepicker.min.js"></script>
<script src="webjars/bootstrap-datetimepicker/2.4.4/js/bootstrap-datetimepicker.js"></script>
<script src="webjars/moment/2.29.1/moment.js"></script>
<script src="webjars/bootstrap-datetimepicker/2.4.4/js/locales/bootstrap-datetimepicker.fr.js"></script>
<script src="webjars/bootstrap-datetimepicker/2.4.4/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>
<script src="webjars/toastr/2.1.3/toastr.js"></script>
<script type="text/javascript" th:src="@{/js/order.js}"></script>
<!--<script>-->
<!--    $(function () {-->
<!--        //禁用“确认重新提交表单”-->
<!--        window.history.replaceState(null, null, window.location.href);-->
<!--    })-->
<!--</script>-->
</body>
</html>